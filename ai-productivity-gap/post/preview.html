<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Integral Problem: Why AI Isn't Moving the Productivity Needle</title>
<style>
  :root {
    --bg: #ffffff;
    --text: #333333;
    --text-muted: #666666;
    --link: #2563eb;
    --link-hover: #1d4ed8;
    --code-bg: #f3f4f6;
    --border-muted: rgba(102, 102, 102, 0.2);
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #1a1a1a;
      --text: #e0e0e0;
      --text-muted: #a0a0a0;
      --link: #60a5fa;
      --link-hover: #93c5fd;
      --code-bg: #2d2d2d;
      --border-muted: rgba(160, 160, 160, 0.2);
    }
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.7;
    font-size: 1.125rem;
  }

  .container {
    max-width: 42rem;
    margin: 0 auto;
    padding: 2rem 1.5rem 4rem;
  }

  header {
    margin-bottom: 2rem;
  }

  header h1 {
    font-size: 1.875rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  header time {
    color: var(--text-muted);
    font-size: 0.875rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  }

  .prose p {
    margin-bottom: 1.25rem;
  }

  .prose h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 2.5rem 0 1rem;
    line-height: 1.3;
  }

  .prose h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 2rem 0 0.75rem;
    line-height: 1.3;
  }

  .prose a {
    color: var(--link);
    text-decoration: underline;
  }

  .prose a:hover {
    color: var(--link-hover);
  }

  .prose img {
    max-width: 100%;
    width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin: 1rem 0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  @media (prefers-color-scheme: dark) {
    .prose img {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
    }
  }

  .prose strong {
    font-weight: 600;
  }

  .prose em {
    font-style: italic;
  }

  .prose ul, .prose ol {
    margin-left: 1.5rem;
    margin-bottom: 1.25rem;
  }

  .prose li {
    margin-bottom: 0.35rem;
  }

  .sources {
    font-size: 0.8rem;
    line-height: 1.5;
    color: var(--text-muted);
  }

  .sources h4 {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
  }

  .sources ul {
    margin-left: 1.2rem;
  }

  .sources li {
    margin-bottom: 0.3rem;
  }

  footer {
    border-top: 1px solid var(--border-muted);
    margin-top: 3rem;
    padding-top: 1.5rem;
    color: var(--text-muted);
    font-size: 0.85rem;
  }

  .draft-banner {
    background: #fef3c7;
    color: #92400e;
    padding: 0.4rem 1rem;
    text-align: center;
    font-size: 0.8rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  @media (prefers-color-scheme: dark) {
    .draft-banner {
      background: #422006;
      color: #fef3c7;
    }
  }

  /* ── Commenting system layout ── */

  .page-layout {
    display: flex;
    justify-content: center;
    gap: 0;
    position: relative;
  }

  .container {
    flex: 0 1 42rem;
    min-width: 0;
  }

  .comments-column {
    flex: 0 0 16rem;
    position: relative;
    padding: 2rem 1rem 4rem 0.5rem;
  }

  /* Draft banner buttons */
  .draft-banner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
  }

  .draft-banner-label {
    font-weight: 600;
    letter-spacing: 0.05em;
  }

  .draft-banner button {
    background: rgba(146, 64, 14, 0.15);
    color: inherit;
    border: 1px solid rgba(146, 64, 14, 0.3);
    padding: 0.15rem 0.6rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-family: inherit;
    cursor: pointer;
    transition: background 0.15s;
  }

  .draft-banner button:hover {
    background: rgba(146, 64, 14, 0.25);
  }

  @media (prefers-color-scheme: dark) {
    .draft-banner button {
      background: rgba(254, 243, 199, 0.1);
      border-color: rgba(254, 243, 199, 0.2);
    }
    .draft-banner button:hover {
      background: rgba(254, 243, 199, 0.2);
    }
  }

  /* Comment highlights in the text */
  mark.comment-highlight {
    background: #fef9c3;
    border-bottom: 2px solid #fde68a;
    border-radius: 2px;
    padding: 0 1px;
    cursor: pointer;
    transition: background 0.15s;
  }

  mark.comment-highlight:hover,
  mark.comment-highlight.active {
    background: #fde68a;
  }

  @media (prefers-color-scheme: dark) {
    mark.comment-highlight {
      background: rgba(254, 249, 195, 0.2);
      border-bottom-color: rgba(253, 230, 138, 0.4);
      color: inherit;
    }
    mark.comment-highlight:hover,
    mark.comment-highlight.active {
      background: rgba(253, 230, 138, 0.35);
    }
  }

  /* Image comment highlights */
  .prose img {
    cursor: pointer;
    transition: outline 0.15s;
  }

  .prose img:hover {
    outline: 2px dashed rgba(245, 158, 11, 0.35);
    outline-offset: 3px;
  }

  .prose img.comment-highlight-img {
    outline: 3px solid #fde68a;
    outline-offset: 3px;
  }

  .prose img.comment-highlight-img:hover,
  .prose img.comment-highlight-img.active {
    outline-color: #f59e0b;
  }

  @media (prefers-color-scheme: dark) {
    .prose img:hover {
      outline-color: rgba(245, 158, 11, 0.25);
    }
    .prose img.comment-highlight-img {
      outline-color: rgba(253, 230, 138, 0.4);
    }
    .prose img.comment-highlight-img:hover,
    .prose img.comment-highlight-img.active {
      outline-color: #f59e0b;
    }
  }

  /* Margin comment cards */
  .comment-card {
    background: #fefce8;
    border: 1px solid #fde68a;
    border-radius: 6px;
    padding: 0.6rem 0.7rem;
    font-size: 0.8rem;
    line-height: 1.45;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
    position: absolute;
    left: 0;
    width: 15rem;
    cursor: pointer;
    transition: border-color 0.15s, box-shadow 0.15s, opacity 0.2s, transform 0.2s;
    opacity: 1;
    transform: translateX(0);
    animation: commentSlideIn 0.2s ease-out;
  }

  @keyframes commentSlideIn {
    from { opacity: 0; transform: translateX(8px); }
    to { opacity: 1; transform: translateX(0); }
  }

  .comment-card:hover {
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  .comment-card.active {
    border-color: #f59e0b;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);
  }

  .comment-card-quote {
    font-style: italic;
    color: #92400e;
    margin-bottom: 0.35rem;
    word-break: break-word;
  }

  .comment-card-text {
    color: #333;
    word-break: break-word;
  }

  .comment-card-delete {
    position: absolute;
    top: 4px;
    right: 6px;
    background: none;
    border: none;
    font-size: 0.85rem;
    color: #b45309;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.15s;
    line-height: 1;
    padding: 2px 4px;
  }

  .comment-card:hover .comment-card-delete {
    opacity: 0.6;
  }

  .comment-card-delete:hover {
    opacity: 1 !important;
  }

  @media (prefers-color-scheme: dark) {
    .comment-card {
      background: #292214;
      border-color: rgba(253, 230, 138, 0.3);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    .comment-card.active {
      border-color: #f59e0b;
      box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
    }
    .comment-card-quote {
      color: #fcd34d;
    }
    .comment-card-text {
      color: #e0e0e0;
    }
    .comment-card-delete {
      color: #fcd34d;
    }
  }

  /* Floating "Add Comment" button */
  .add-comment-btn {
    position: absolute;
    z-index: 200;
    background: #f59e0b;
    color: #fff;
    border: none;
    padding: 0.3rem 0.75rem;
    border-radius: 999px;
    font-size: 0.78rem;
    font-family: system-ui, -apple-system, sans-serif;
    font-weight: 500;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    white-space: nowrap;
    transition: background 0.15s, transform 0.1s;
    animation: popIn 0.12s ease-out;
  }

  @keyframes popIn {
    from { transform: scale(0.85); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .add-comment-btn:hover {
    background: #d97706;
  }

  /* Floating comment input */
  .comment-input-container {
    position: absolute;
    z-index: 200;
    background: #fefce8;
    border: 1px solid #fde68a;
    border-radius: 8px;
    padding: 0.6rem;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
    width: 18rem;
    animation: popIn 0.12s ease-out;
  }

  .comment-input-container textarea {
    width: 100%;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    padding: 0.4rem 0.5rem;
    font-size: 0.82rem;
    font-family: inherit;
    line-height: 1.4;
    resize: vertical;
    min-height: 3rem;
    color: #333;
    background: #fff;
  }

  .comment-input-container textarea:focus {
    outline: none;
    border-color: #f59e0b;
    box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.15);
  }

  .comment-input-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.4rem;
    margin-top: 0.4rem;
  }

  .comment-input-actions button {
    padding: 0.25rem 0.6rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-family: inherit;
    cursor: pointer;
    border: none;
  }

  .comment-submit-btn {
    background: #f59e0b;
    color: #fff;
    font-weight: 500;
  }

  .comment-submit-btn:hover {
    background: #d97706;
  }

  .comment-cancel-btn {
    background: #e5e7eb;
    color: #666;
  }

  .comment-cancel-btn:hover {
    background: #d1d5db;
  }

  @media (prefers-color-scheme: dark) {
    .comment-input-container {
      background: #292214;
      border-color: rgba(253, 230, 138, 0.3);
    }
    .comment-input-container textarea {
      background: #1a1a1a;
      color: #e0e0e0;
      border-color: #444;
    }
    .comment-input-container textarea:focus {
      border-color: #f59e0b;
    }
    .comment-cancel-btn {
      background: #444;
      color: #aaa;
    }
  }

  /* Inline comment cards for narrow screens */
  .comment-card-inline {
    background: #fefce8;
    border: 1px solid #fde68a;
    border-radius: 6px;
    padding: 0.5rem 0.65rem;
    font-size: 0.8rem;
    line-height: 1.45;
    margin: 0.5rem 0 1rem 0;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
    position: relative;
    cursor: pointer;
    transition: border-color 0.15s;
  }

  .comment-card-inline.active {
    border-color: #f59e0b;
  }

  .comment-card-inline .comment-card-quote {
    font-style: italic;
    color: #92400e;
    margin-bottom: 0.25rem;
  }

  .comment-card-inline .comment-card-text {
    color: #333;
  }

  .comment-card-inline .comment-card-delete {
    position: absolute;
    top: 4px;
    right: 6px;
    background: none;
    border: none;
    font-size: 0.85rem;
    color: #b45309;
    cursor: pointer;
    opacity: 0.4;
    line-height: 1;
    padding: 2px 4px;
  }

  .comment-card-inline .comment-card-delete:hover {
    opacity: 1;
  }

  @media (prefers-color-scheme: dark) {
    .comment-card-inline {
      background: #292214;
      border-color: rgba(253, 230, 138, 0.3);
    }
    .comment-card-inline.active {
      border-color: #f59e0b;
    }
    .comment-card-inline .comment-card-quote { color: #fcd34d; }
    .comment-card-inline .comment-card-text { color: #e0e0e0; }
    .comment-card-inline .comment-card-delete { color: #fcd34d; }
  }

  /* Wide screen: show margin column, hide inline cards */
  @media (min-width: 900px) {
    .comment-card-inline {
      display: none !important;
    }
  }

  /* Narrow screen: hide margin column, show inline cards */
  @media (max-width: 899px) {
    .comments-column {
      display: none !important;
    }
    .page-layout {
      display: block;
    }
  }
</style>
</head>
<body>

<div class="draft-banner">
  <span class="draft-banner-label">DRAFT PREVIEW</span>
  <button id="save-feedback-btn" title="Export comments as JSON">Save Feedback</button>
  <button id="clear-comments-btn" title="Remove all comments">Clear All Comments</button>
</div>

<div class="page-layout">

<div class="container">

<header>
  <h1>The Integral Problem: Why AI Isn't Moving the Productivity Needle</h1>
  <time>2026-02-14</time>
</header>

<div class="prose">

<p>I've spent the last year working across multiple engineering and product teams at a large tech company. During that time, GPT-4o shipped. Claude Opus 4 shipped. Claude Code, Gemini 2.5 Pro, GitHub Copilot CLI, OpenAI's Codex CLI. The tooling got dramatically better every quarter.</p>

<p>And still, at most 1 in 20 engineers I worked with truly adopted AI into their workflows.</p>

<p>Not 1 in 20 across the whole company. 1 in 20 among core engineering and product teams. The people who should be first. The people who build software for a living.</p>

<p>That ratio haunts me. Because the tools work. I know they work. I use them every day. But almost nobody around me does. And that means, at the organizational level, AI is barely moving the needle.</p>

<h2>The integral problem</h2>

<p>Think about organizational productivity as a curve. On the x-axis, you have employees ranked by percentile. On the y-axis, output. The total productivity of the organization is the area under that curve. The integral.</p>

<img src="../charts/01_productivity_curve.png" alt="The Integral Problem: before and after AI productivity curves showing minimal area gain">

<p>Now imagine AI shifts the top 5% of that curve dramatically upward. Those 1-in-20 power users become significantly more productive. Great for them. But look at the shaded area between the old curve and the new one. It's tiny. The integral barely changes.</p>

<p>This is the core problem. Organizational output is not determined by its best performers. It's determined by the aggregate. By the full distribution. And if 95% of that distribution doesn't move, neither does the organization.</p>

<p>The math is simple and unforgiving. A 3x productivity gain for 5% of your workforce is a 10% gain for the organization. That sounds decent until you realize these tools could deliver a 3x gain for <em>everyone</em>. The gap between what's possible and what's happening is enormous.</p>

<h2>The capability-adoption gap</h2>

<p>The timeline tells the story. Every few months, a new model ships that's meaningfully better than the last. The capability curve keeps climbing. But the adoption curve stays flat.</p>

<img src="../charts/02_capability_adoption_gap.png" alt="AI capability vs enterprise adoption timeline showing widening gap">

<p>The data backs this up. According to McKinsey's 2025 State of AI survey, 88% of organizations say they "use AI." But only 7% have fully scaled it across their operations. That gap between saying and doing is where the productivity gains go to die.</p>

<p>It gets worse. Worklytics' 2025 AI Adoption Benchmarks found that 74% of companies show no tangible value from their AI investments. Not negative value. Just nothing measurable.</p>

<p>The Anthropic Economic Index measured AI usage patterns across enterprise deployments and found a Gini coefficient of 0.84 to 0.86. For context, a Gini of 1.0 means one person does everything and everyone else does nothing. A Gini of 0.85 is extreme concentration. A small number of power users account for the vast majority of AI usage. Frontier workers in their dataset sent 6x more messages than the median enterprise user.</p>

<p>And the trend is going the wrong direction. According to a 2025 survey from Lucidworks, 42% of companies abandoned most of their AI initiatives in 2025, up from 17% in 2024. Companies aren't ramping up. They're giving up.</p>

<p>The gap between what's available and what's adopted is widening. Not closing.</p>

<h2>Why the gap exists</h2>

<p>I've watched this play out up close. Five problems keep showing up.</p>

<h3>The learning curve is real</h3>

<p>I consider myself AI-fluent. I've been building with these tools since GPT-3. And even for me, getting truly productive took significant effort.</p>

<p>I got lucky. During paternity leave, I had unstructured time to experiment. I'd hold my son in one arm and voice-transcribe prompts with the other. That sounds ridiculous, but it worked. Hours of low-stakes experimentation, trying things, failing, adjusting. That's what it takes.</p>

<p>Most employees don't have that. They have meetings, deadlines, and sprint commitments. They get maybe 30 minutes to try a new tool before the next Slack message pulls them away. That's not enough.</p>

<p>Being truly productive with AI means being comfortable at the command line. It means browser automation, piping outputs between tools, hacking things together. GitHub Copilot CLI, Claude Code, Codex CLI: these are where the real leverage lives. But for most knowledge workers, that's an intimidating bar. And nobody is helping them clear it.</p>

<h3>The belief deficit</h3>

<p>Most people's impression of AI comes from public failures. The lawyer who cited fake cases. The company that shipped AI-generated slop. The chatbot that told someone to eat rocks.</p>

<p>Can you blame someone for not wanting to stake their reputation on a tool they associate with embarrassing output?</p>

<p>Here's the thing: AI slop is a human problem, not an AI problem. It comes from people who don't review AI output. People who copy-paste without reading. People who were never trained on how to prompt well or how to verify results. This problem has existed forever. AI just makes it faster to produce bad work at scale.</p>

<p>The fix is straightforward. Build review processes. Train people on what good AI-assisted work looks like. Show them, with real examples from their own domain, that the output is good when the process is good. You have to break the association between "AI" and "slop" before anyone will invest their time.</p>

<h3>The training is useless</h3>

<p>Every AI training I've attended was a marketing person demoing tools that employees aren't allowed to use.</p>

<p>I'm not exaggerating. The demos are flashy. Someone shows ChatGPT writing a poem or summarizing a document. The audience nods politely. Then everyone goes back to their desks and nothing changes. Because the demo didn't teach them how to integrate AI into <em>their</em> workflow. It showed them what's theoretically possible in a vacuum.</p>

<p>Real training looks nothing like this. Real training means hands-on workshops where people build their own workflows with their own data. It means pairing AI-fluent employees with those who aren't. It means giving people time (real, protected, calendar-blocked time) to experiment and fail. Not a 45-minute lunch-and-learn.</p>

<h3>Enterprise tools aren't ready</h3>

<p>Companies love to shove their own half-baked AI wrappers down employees' throats. "Use our internal copilot. It's approved by security." The internal copilot is a thin wrapper around a rate-limited API with a clunky interface and a six-month-old model.</p>

<p>Meanwhile, the tools that actually work (Claude Code, Cursor, GitHub Copilot) are either blocked or exist in a gray area. So what happens? Shadow AI. Employees use the good tools anyway, just on their personal machines, outside the security perimeter.</p>

<p>This is an own goal. If your employees are using unauthorized tools, that's a signal. The sanctioned tools aren't good enough. Fix the tools, don't punish the behavior.</p>

<p>There's a regulatory parallel here. The US leads in AI development partly because of a lighter regulatory touch compared to Europe's more restrictive approach. Over-regulation inside organizations has the same chilling effect. When you make it hard to use AI, people either don't use it or use it outside your visibility. Neither outcome is what you want.</p>

<h3>Productivity is deeply personal</h3>

<p>Knowledge work is individual. The way I write code is different from how you write code. The way I draft documents, run analyses, manage projects: all different. There is no single AI workflow that fits everyone.</p>

<p>Enterprise tools are designed as if one workflow works for all. It doesn't. A product manager needs AI for different things than a backend engineer, who needs it for different things than a data scientist.</p>

<p>The only way to make AI truly personal and productive is to get into the command line. To become a bit of a hacker. To chain tools together in ways that fit your specific work. That's a hard sell in a corporate environment that values standardization. But standardization is exactly the wrong instinct here.</p>

<h2>What to do Monday morning</h2>

<p>I've laid out the problem. Here's what I'd do about it, starting this week.</p>

<h3>Mandate the AI path, with patience</h3>

<p>For new projects, default to the AI-assisted approach. Don't make it optional. But hold quality to the same bar as before. The goal is not to ship faster. The goal is to ship the same quality, faster, once people are up to speed.</p>

<p>Here's the part most managers skip: you have to budget for a temporary productivity dip. You cannot mandate AI and then penalize people for being slower while they learn. That kills adoption dead.</p>

<p>John Ousterhout from Stanford calls AI a "tactical tornado." It lets you move fast, but speed without review produces slop. The fix is active review and tight feedback loops, not pulling back from AI. Quality control isn't optional. It's the entire point. AI without review is like shipping code without tests.</p>

<h3>Invest in applied training, not demos</h3>

<p>Stop doing demo-driven AI training. Today. It's worse than useless because it creates the illusion that you've invested in adoption.</p>

<p>Real training means:</p>
<ul>
  <li>Hands-on workshops where people build workflows with their own data</li>
  <li>Pairing AI-fluent employees with those who are still learning</li>
  <li>Dedicated, protected time for experimentation (not squeezed into existing sprints)</li>
  <li>Follow-up sessions to share what worked and what didn't</li>
</ul>

<p>I became fluent with AI during paternity leave because I had unstructured time. You can't give everyone paternity leave, but you can carve out space for the same kind of experimentation. Two hours a week. A Friday afternoon. Something.</p>

<h3>Embrace CLI-level tools</h3>

<p>The real productivity unlock comes from tools that work in the terminal. GitHub Copilot CLI, Claude Code, OpenAI Codex CLI, Cursor. These tools integrate into the actual development workflow. They don't live in a separate browser tab you forget about.</p>

<p>Here's a concrete example. Two years ago, I drove a customer communication program reaching out to hundreds of one-off customers at a large tech company. It was slow, imprecise, and mostly ineffective. We were crafting generic messages and hoping they landed. Fast forward to today: using AI, the same type of campaign can be surgical and prescriptive. Tailored outreach, specific recommendations per customer, context-aware follow-ups.</p>

<p>But it wasn't easy. It took trial and error. Hours of prompt iteration. Building custom pipelines. The point is: the effort pays off, but you have to invest it. The enterprise wrappers that promise "AI in a box" aren't there yet. You have to get down and dirty with tools that work.</p>

<h3>Accept that productivity is personal</h3>

<p>Stop prescribing. There is no one-size-fits-all AI workflow. A mandate to "use tool X for task Y" will fail because it ignores how individual knowledge work actually is.</p>

<p>Instead: give people time and explicit permission to find their own use cases. Celebrate when someone discovers an unconventional workflow. Share wins across teams. Let adoption be organic, messy, and personal.</p>

<h3>Enable, don't gate</h3>

<p>Stop battling shadow AI. You will lose.</p>

<p>If employees are going around your approved tools, that tells you something important about your approved tools. Instead of locking things down further, solve for data security and let people experiment.</p>

<p>Trust your employees. Invest in upleveling them while keeping data safe. Build guardrails, not gates. There's a meaningful difference.</p>

<p>Organizations that over-regulate AI internally will slow down, just like countries that over-regulate it nationally. The companies that win will be the ones that figured out how to say "yes, and here's how to do it safely" instead of "no."</p>

<h2>The bottom line</h2>

<p>This is a generational opportunity. The tools are here. They work. The bottleneck is not technological. It's organizational. It's cultural. It's about belief, patience, and trust.</p>

<p>The gap between AI capability and enterprise adoption is widening every month. Every model release makes the tools more powerful. But none of that matters if only 1 in 20 people use them.</p>

<p>Here's what to do Monday morning:</p>

<ul>
  <li>Mandate the AI-assisted path for new work, but budget for the learning curve</li>
  <li>Replace demo-driven training with hands-on workshops and pairing</li>
  <li>Invest in CLI-level tools that integrate into real workflows</li>
  <li>Let people find their own AI workflows instead of prescribing one</li>
  <li>Enable experimentation and solve for security, not control</li>
</ul>

<p>The integral only changes when the whole curve moves. Not just the tail.</p>

</div>

<footer>

<div class="sources">
<h4>Sources</h4>
<ul>
  <li><strong>AI adoption:</strong> McKinsey, "The State of AI" (2024, 2025)</li>
  <li><strong>Employee-level usage:</strong> Worklytics, "2025 AI Adoption Benchmarks"</li>
  <li><strong>Usage concentration:</strong> Anthropic, "Economic Index" (September 2025)</li>
  <li><strong>Developer adoption:</strong> Stack Overflow Developer Survey 2024; JetBrains Developer Ecosystem 2024</li>
  <li><strong>Initiative abandonment:</strong> Lucidworks, AI Survey 2025</li>
  <li><strong>Copilot productivity:</strong> Microsoft Research, "The Impact of AI on Developer Productivity"</li>
</ul>
</div>

</footer>

</div>

<div class="comments-column" id="comments-column"></div>

</div>

<script>
(function() {
  'use strict';

  // ── State ──
  var STORAGE_KEY = 'draft-comments-' + slugify(document.title);
  var comments = []; // Array of { id, selectedText, comment, section, paragraphContext, charOffset }
  var commentCounter = 0;
  var activeCommentId = null;

  // ── DOM references ──
  var prose = document.querySelector('.prose');
  var commentsColumn = document.getElementById('comments-column');
  var saveFeedbackBtn = document.getElementById('save-feedback-btn');
  var clearCommentsBtn = document.getElementById('clear-comments-btn');

  // Floating UI elements (created on demand)
  var addCommentBtn = null;
  var commentInputContainer = null;
  var pendingSelection = null; // text: { type, text, range, rect, paragraph, charOffset, section } or image: { type, text, imgSrc, imgAlt, imgEl, rect, section }

  // ── Utility functions ──

  function slugify(str) {
    return str.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
  }

  function generateId() {
    commentCounter++;
    return 'comment-' + Date.now() + '-' + commentCounter;
  }

  function truncate(str, len) {
    if (str.length <= len) return str;
    return str.slice(0, len - 1) + '\u2026';
  }

  function removeAllChildren(el) {
    while (el.firstChild) {
      el.removeChild(el.firstChild);
    }
  }

  function getNearestHeading(node) {
    var el = node.nodeType === 3 ? node.parentElement : node;
    while (el && el !== prose) {
      var prev = el.previousElementSibling;
      while (prev) {
        if (prev.tagName === 'H2' || prev.tagName === 'H3') {
          return prev.textContent.trim();
        }
        prev = prev.previousElementSibling;
      }
      el = el.parentElement;
    }
    return '';
  }

  function getContainingParagraph(node) {
    var el = node.nodeType === 3 ? node.parentElement : node;
    while (el && el !== prose) {
      if (el.tagName === 'P' || el.tagName === 'LI') return el;
      el = el.parentElement;
    }
    return null;
  }

  function getCharOffsetInParagraph(paragraph, range) {
    var walker = document.createTreeWalker(paragraph, NodeFilter.SHOW_TEXT, null, false);
    var offset = 0;
    var node;
    while ((node = walker.nextNode())) {
      if (node === range.startContainer) {
        return offset + range.startOffset;
      }
      offset += node.textContent.length;
    }
    return offset;
  }

  // ── Highlight wrapping ──

  function wrapRangeWithMark(range, commentId) {
    var mark = document.createElement('mark');
    mark.className = 'comment-highlight';
    mark.dataset.commentId = commentId;
    try {
      range.surroundContents(mark);
    } catch (e) {
      var fragment = range.extractContents();
      mark.appendChild(fragment);
      range.insertNode(mark);
    }
    mark.addEventListener('click', function() {
      setActiveComment(commentId);
      scrollToCard(commentId);
    });
    return mark;
  }

  function findAndHighlightText(commentData) {
    var paragraphs = prose.querySelectorAll('p, li');
    var targetParagraph = null;
    for (var i = 0; i < paragraphs.length; i++) {
      var pText = paragraphs[i].textContent.slice(0, 100);
      if (pText === commentData.paragraphContext) {
        targetParagraph = paragraphs[i];
        break;
      }
    }
    if (!targetParagraph) return false;

    var fullText = targetParagraph.textContent;
    var searchText = commentData.selectedText;
    var expectedOffset = commentData.charOffset;

    var idx = fullText.indexOf(searchText, Math.max(0, expectedOffset - 5));
    if (idx === -1) {
      idx = fullText.indexOf(searchText);
    }
    if (idx === -1) return false;

    var walker = document.createTreeWalker(targetParagraph, NodeFilter.SHOW_TEXT, null, false);
    var currentOffset = 0;
    var startNode = null, startOff = 0, endNode = null, endOff = 0;
    var node;
    while ((node = walker.nextNode())) {
      var nodeLen = node.textContent.length;
      if (!startNode && currentOffset + nodeLen > idx) {
        startNode = node;
        startOff = idx - currentOffset;
      }
      if (startNode && currentOffset + nodeLen >= idx + searchText.length) {
        endNode = node;
        endOff = idx + searchText.length - currentOffset;
        break;
      }
      currentOffset += nodeLen;
    }

    if (!startNode || !endNode) return false;

    var range = document.createRange();
    range.setStart(startNode, startOff);
    range.setEnd(endNode, endOff);

    wrapRangeWithMark(range, commentData.id);
    return true;
  }

  function removeHighlight(commentId) {
    var marks = prose.querySelectorAll('mark[data-comment-id="' + commentId + '"]');
    marks.forEach(function(mark) {
      var parent = mark.parentNode;
      while (mark.firstChild) {
        parent.insertBefore(mark.firstChild, mark);
      }
      parent.removeChild(mark);
      parent.normalize();
    });
  }

  // ── Image comment helpers ──

  function getImageForComment(commentData) {
    var imgs = prose.querySelectorAll('img');
    for (var i = 0; i < imgs.length; i++) {
      if (imgs[i].getAttribute('src') === commentData.imgSrc) return imgs[i];
    }
    return null;
  }

  function addImageHighlight(img, commentId) {
    img.classList.add('comment-highlight-img');
    var ids = (img.dataset.commentIds || '').split(' ').filter(Boolean);
    if (ids.indexOf(commentId) === -1) ids.push(commentId);
    img.dataset.commentIds = ids.join(' ');
    img.addEventListener('click', onImageClick);
  }

  function removeImageHighlight(img, commentId) {
    var ids = (img.dataset.commentIds || '').split(' ').filter(Boolean);
    ids = ids.filter(function(id) { return id !== commentId; });
    if (ids.length === 0) {
      img.classList.remove('comment-highlight-img');
      img.classList.remove('active');
      delete img.dataset.commentIds;
    } else {
      img.dataset.commentIds = ids.join(' ');
    }
  }

  function getAnchorForComment(commentData) {
    if (commentData.type === 'image') {
      return getImageForComment(commentData);
    }
    return prose.querySelector('mark[data-comment-id="' + commentData.id + '"]');
  }

  // ── Comment cards ──

  function renderAllCards() {
    removeAllChildren(commentsColumn);

    var inlineCards = prose.querySelectorAll('.comment-card-inline');
    for (var i = 0; i < inlineCards.length; i++) {
      inlineCards[i].remove();
    }

    for (var j = 0; j < comments.length; j++) {
      createMarginCard(comments[j]);
      createInlineCard(comments[j]);
    }

    positionMarginCards();
  }

  function createMarginCard(commentData) {
    var card = document.createElement('div');
    card.className = 'comment-card';
    if (commentData.id === activeCommentId) card.classList.add('active');
    card.dataset.commentId = commentData.id;

    var quote = document.createElement('div');
    quote.className = 'comment-card-quote';
    if (commentData.type === 'image') {
      quote.textContent = 'Chart: ' + truncate(commentData.imgAlt || commentData.imgSrc, 50);
    } else {
      quote.textContent = '\u201c' + truncate(commentData.selectedText, 50) + '\u201d';
    }

    var text = document.createElement('div');
    text.className = 'comment-card-text';
    text.textContent = commentData.comment;

    var del = document.createElement('button');
    del.className = 'comment-card-delete';
    del.textContent = '\u00d7';
    del.title = 'Delete comment';
    del.addEventListener('click', function(e) {
      e.stopPropagation();
      deleteComment(commentData.id);
    });

    card.appendChild(quote);
    card.appendChild(text);
    card.appendChild(del);

    card.addEventListener('click', function() {
      setActiveComment(commentData.id);
      scrollToHighlight(commentData.id);
    });

    commentsColumn.appendChild(card);
  }

  function createInlineCard(commentData) {
    var anchor = getAnchorForComment(commentData);
    if (!anchor) return;

    var card = document.createElement('div');
    card.className = 'comment-card-inline';
    if (commentData.id === activeCommentId) card.classList.add('active');
    card.dataset.commentId = commentData.id;

    var quote = document.createElement('div');
    quote.className = 'comment-card-quote';
    if (commentData.type === 'image') {
      quote.textContent = 'Chart: ' + truncate(commentData.imgAlt || commentData.imgSrc, 50);
    } else {
      quote.textContent = '\u201c' + truncate(commentData.selectedText, 50) + '\u201d';
    }

    var text = document.createElement('div');
    text.className = 'comment-card-text';
    text.textContent = commentData.comment;

    var del = document.createElement('button');
    del.className = 'comment-card-delete';
    del.textContent = '\u00d7';
    del.title = 'Delete comment';
    del.addEventListener('click', function(e) {
      e.stopPropagation();
      deleteComment(commentData.id);
    });

    card.appendChild(quote);
    card.appendChild(text);
    card.appendChild(del);

    card.addEventListener('click', function() {
      setActiveComment(commentData.id);
      scrollToHighlight(commentData.id);
    });

    var parent = commentData.type === 'image' ? anchor : anchor.closest('p, li, h2, h3, img');
    if (parent && parent.parentNode) {
      parent.parentNode.insertBefore(card, parent.nextSibling);
    }
  }

  function positionMarginCards() {
    var cards = commentsColumn.querySelectorAll('.comment-card');
    var scrollY = window.scrollY || document.documentElement.scrollTop;
    var columnTop = commentsColumn.getBoundingClientRect().top + scrollY;
    var lastBottom = 0;

    for (var i = 0; i < cards.length; i++) {
      var card = cards[i];
      var commentId = card.dataset.commentId;
      var commentData = comments.find(function(c) { return c.id === commentId; });
      var anchor = commentData ? getAnchorForComment(commentData) : null;
      if (!anchor) {
        // Fallback: try mark element directly
        anchor = prose.querySelector('mark[data-comment-id="' + commentId + '"]');
      }
      if (!anchor) continue;

      var anchorRect = anchor.getBoundingClientRect();
      var desiredTop = anchorRect.top + scrollY - columnTop;

      if (desiredTop < lastBottom + 8) {
        desiredTop = lastBottom + 8;
      }

      card.style.top = desiredTop + 'px';
      lastBottom = desiredTop + card.offsetHeight;
    }
  }

  // ── Active comment highlighting ──

  function setActiveComment(commentId) {
    activeCommentId = commentId;

    var highlights = prose.querySelectorAll('mark.comment-highlight');
    for (var i = 0; i < highlights.length; i++) {
      highlights[i].classList.toggle('active', highlights[i].dataset.commentId === commentId);
    }

    // Toggle active state on commented images
    var commentedImgs = prose.querySelectorAll('img.comment-highlight-img');
    for (var m = 0; m < commentedImgs.length; m++) {
      var imgIds = (commentedImgs[m].dataset.commentIds || '').split(' ');
      commentedImgs[m].classList.toggle('active', imgIds.indexOf(commentId) !== -1);
    }

    var marginCards = commentsColumn.querySelectorAll('.comment-card');
    for (var j = 0; j < marginCards.length; j++) {
      marginCards[j].classList.toggle('active', marginCards[j].dataset.commentId === commentId);
    }

    var inlineCards = prose.querySelectorAll('.comment-card-inline');
    for (var k = 0; k < inlineCards.length; k++) {
      inlineCards[k].classList.toggle('active', inlineCards[k].dataset.commentId === commentId);
    }
  }

  function scrollToCard(commentId) {
    var isWide = window.innerWidth >= 900;
    var card;
    if (isWide) {
      card = commentsColumn.querySelector('.comment-card[data-comment-id="' + commentId + '"]');
    } else {
      card = prose.querySelector('.comment-card-inline[data-comment-id="' + commentId + '"]');
    }
    if (card) {
      card.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }

  function scrollToHighlight(commentId) {
    var commentData = comments.find(function(c) { return c.id === commentId; });
    var anchor = commentData ? getAnchorForComment(commentData) : null;
    if (!anchor) {
      anchor = prose.querySelector('mark[data-comment-id="' + commentId + '"]');
    }
    if (anchor) {
      anchor.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }

  // ── Floating "Add Comment" button ──

  function showAddCommentButton(x, y) {
    removeAddCommentButton();
    addCommentBtn = document.createElement('button');
    addCommentBtn.className = 'add-comment-btn';
    addCommentBtn.textContent = 'Comment';
    addCommentBtn.style.left = x + 'px';
    addCommentBtn.style.top = y + 'px';
    document.body.appendChild(addCommentBtn);

    addCommentBtn.addEventListener('mousedown', function(e) {
      e.preventDefault();
      e.stopPropagation();
    });
    addCommentBtn.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      showCommentInput();
    });
  }

  function removeAddCommentButton() {
    if (addCommentBtn && addCommentBtn.parentNode) {
      addCommentBtn.parentNode.removeChild(addCommentBtn);
    }
    addCommentBtn = null;
  }

  // ── Comment input ──

  function showCommentInput() {
    removeAddCommentButton();
    removeCommentInput();
    if (!pendingSelection) return;

    commentInputContainer = document.createElement('div');
    commentInputContainer.className = 'comment-input-container';

    var textarea = document.createElement('textarea');
    textarea.placeholder = 'Add your comment\u2026';
    textarea.rows = 2;

    var actions = document.createElement('div');
    actions.className = 'comment-input-actions';

    var cancelBtn = document.createElement('button');
    cancelBtn.className = 'comment-cancel-btn';
    cancelBtn.textContent = 'Cancel';

    var submitBtn = document.createElement('button');
    submitBtn.className = 'comment-submit-btn';
    submitBtn.textContent = 'Add';

    actions.appendChild(cancelBtn);
    actions.appendChild(submitBtn);

    commentInputContainer.appendChild(textarea);
    commentInputContainer.appendChild(actions);

    var scrollY = window.scrollY || document.documentElement.scrollTop;
    var scrollX = window.scrollX || document.documentElement.scrollLeft;
    var rect = pendingSelection.rect;
    var left = rect.right + scrollX + 8;
    var top = rect.top + scrollY;

    if (left + 288 > window.innerWidth + scrollX) {
      left = rect.left + scrollX - 296;
    }
    if (left < scrollX + 8) {
      left = scrollX + 8;
    }

    commentInputContainer.style.left = left + 'px';
    commentInputContainer.style.top = top + 'px';
    document.body.appendChild(commentInputContainer);
    textarea.focus();

    submitBtn.addEventListener('click', function() {
      submitComment(textarea.value.trim());
    });

    cancelBtn.addEventListener('click', function() {
      removeCommentInput();
      pendingSelection = null;
    });

    textarea.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        submitComment(textarea.value.trim());
      }
      if (e.key === 'Escape') {
        removeCommentInput();
        pendingSelection = null;
      }
    });
  }

  function removeCommentInput() {
    if (commentInputContainer && commentInputContainer.parentNode) {
      commentInputContainer.parentNode.removeChild(commentInputContainer);
    }
    commentInputContainer = null;
  }

  function submitComment(text) {
    if (!text || !pendingSelection) {
      removeCommentInput();
      pendingSelection = null;
      return;
    }

    var id = generateId();
    var commentData;

    if (pendingSelection.type === 'image') {
      commentData = {
        id: id,
        type: 'image',
        selectedText: pendingSelection.imgAlt || pendingSelection.imgSrc,
        comment: text,
        section: pendingSelection.section,
        imgSrc: pendingSelection.imgSrc,
        imgAlt: pendingSelection.imgAlt
      };
      addImageHighlight(pendingSelection.imgEl, id);
    } else {
      commentData = {
        id: id,
        type: 'text',
        selectedText: pendingSelection.text,
        comment: text,
        section: pendingSelection.section,
        paragraphContext: pendingSelection.paragraphContext,
        charOffset: pendingSelection.charOffset
      };
      try {
        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(pendingSelection.range);
        wrapRangeWithMark(pendingSelection.range, id);
      } catch(e) {
        findAndHighlightText(commentData);
      }
    }

    comments.push(commentData);
    saveToLocalStorage();
    removeCommentInput();
    pendingSelection = null;

    renderAllCards();
    setActiveComment(id);

    requestAnimationFrame(function() { positionMarginCards(); });
  }

  // ── Delete comment ──

  function deleteComment(commentId) {
    var commentData = comments.find(function(c) { return c.id === commentId; });
    if (commentData && commentData.type === 'image') {
      var img = getImageForComment(commentData);
      if (img) removeImageHighlight(img, commentId);
    } else {
      removeHighlight(commentId);
    }
    comments = comments.filter(function(c) { return c.id !== commentId; });
    if (activeCommentId === commentId) activeCommentId = null;
    saveToLocalStorage();
    renderAllCards();
  }

  // ── Persistence ──

  function saveToLocalStorage() {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(comments));
    } catch(e) { /* silently fail */ }
  }

  function loadFromLocalStorage() {
    try {
      var stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        comments = JSON.parse(stored);
        for (var i = 0; i < comments.length; i++) {
          var parts = comments[i].id.split('-');
          var num = parseInt(parts[parts.length - 1], 10);
          if (num > commentCounter) commentCounter = num;
        }
      }
    } catch(e) {
      comments = [];
    }
  }

  function restoreComments() {
    loadFromLocalStorage();
    for (var i = 0; i < comments.length; i++) {
      if (comments[i].type === 'image') {
        var img = getImageForComment(comments[i]);
        if (img) addImageHighlight(img, comments[i].id);
      } else {
        findAndHighlightText(comments[i]);
      }
    }
    renderAllCards();
  }

  // ── Save feedback to file ──

  function saveFeedback() {
    var exportData = {
      draft: document.title,
      timestamp: new Date().toISOString(),
      comments: comments.map(function(c) {
        var out = {
          id: c.id,
          type: c.type || 'text',
          selectedText: c.selectedText,
          comment: c.comment,
          section: c.section
        };
        if (c.type === 'image') {
          out.imgSrc = c.imgSrc;
          out.imgAlt = c.imgAlt;
        } else {
          out.paragraphContext = c.paragraphContext;
        }
        return out;
      })
    };

    var json = JSON.stringify(exportData, null, 2);

    if (window.showSaveFilePicker) {
      window.showSaveFilePicker({
        suggestedName: 'feedback.json',
        types: [{
          description: 'JSON files',
          accept: { 'application/json': ['.json'] }
        }]
      }).then(function(handle) {
        return handle.createWritable().then(function(writable) {
          return writable.write(json).then(function() {
            return writable.close();
          });
        });
      }).catch(function(e) {
        if (e.name === 'AbortError') return;
        downloadFallback(json);
      });
    } else {
      downloadFallback(json);
    }
  }

  function downloadFallback(json) {
    var blob = new Blob([json], { type: 'application/json' });
    var url = URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.download = 'feedback.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  // ── Clear all comments ──

  function clearAllComments() {
    if (comments.length === 0) return;
    if (!confirm('Remove all comments? This cannot be undone.')) return;

    for (var i = 0; i < comments.length; i++) {
      if (comments[i].type === 'image') {
        var img = getImageForComment(comments[i]);
        if (img) removeImageHighlight(img, comments[i].id);
      } else {
        removeHighlight(comments[i].id);
      }
    }
    comments = [];
    activeCommentId = null;
    saveToLocalStorage();
    renderAllCards();
  }

  // ── Selection handling ──

  function handleMouseUp(e) {
    if (e.target.closest('.add-comment-btn, .comment-input-container, .comment-card, .comment-card-inline, .draft-banner')) {
      return;
    }

    // Skip text selection handling when clicking on images (handled by onImageClick)
    if (e.target.tagName === 'IMG' && e.target.closest('.prose')) {
      return;
    }

    if (commentInputContainer && !e.target.closest('.comment-input-container')) {
      removeCommentInput();
      pendingSelection = null;
    }

    var sel = window.getSelection();
    if (!sel || sel.isCollapsed || !sel.rangeCount) {
      removeAddCommentButton();
      return;
    }

    var range = sel.getRangeAt(0);
    var text = sel.toString().trim();
    if (!text) {
      removeAddCommentButton();
      return;
    }

    var container = range.commonAncestorContainer;
    var inProse = (container.nodeType === 3 ? container.parentElement : container).closest('.prose');
    if (!inProse) {
      removeAddCommentButton();
      return;
    }

    var startInMark = range.startContainer.nodeType === 3
      ? range.startContainer.parentElement.closest('mark.comment-highlight')
      : range.startContainer.closest ? range.startContainer.closest('mark.comment-highlight') : null;
    if (startInMark) {
      removeAddCommentButton();
      return;
    }

    var paragraph = getContainingParagraph(range.startContainer);
    var paragraphContext = paragraph ? paragraph.textContent.slice(0, 100) : '';
    var charOffset = paragraph ? getCharOffsetInParagraph(paragraph, range) : 0;
    var section = getNearestHeading(range.startContainer);

    pendingSelection = {
      text: text,
      range: range.cloneRange(),
      rect: range.getBoundingClientRect(),
      paragraph: paragraph,
      paragraphContext: paragraphContext,
      charOffset: charOffset,
      section: section
    };

    var scrollY = window.scrollY || document.documentElement.scrollTop;
    var scrollX = window.scrollX || document.documentElement.scrollLeft;
    var rect = range.getBoundingClientRect();
    var btnX = rect.right + scrollX + 4;
    var btnY = rect.top + scrollY - 32;

    if (btnX + 80 > window.innerWidth + scrollX) {
      btnX = rect.left + scrollX;
    }
    if (btnY < scrollY) {
      btnY = rect.bottom + scrollY + 4;
    }

    showAddCommentButton(btnX, btnY);
  }

  function onImageClick(e) {
    var img = e.target;
    if (!img || img.tagName !== 'IMG' || !img.closest('.prose')) return;

    // If there's an open comment input, close it
    removeAddCommentButton();
    removeCommentInput();

    var section = getNearestHeading(img);
    var rect = img.getBoundingClientRect();

    pendingSelection = {
      type: 'image',
      text: img.alt || img.src,
      imgSrc: img.getAttribute('src'),
      imgAlt: img.getAttribute('alt') || '',
      imgEl: img,
      rect: rect,
      section: section
    };

    var scrollY = window.scrollY || document.documentElement.scrollTop;
    var scrollX = window.scrollX || document.documentElement.scrollLeft;
    var btnX = rect.right + scrollX - 80;
    var btnY = rect.top + scrollY + 8;

    showAddCommentButton(btnX, btnY);
    e.stopPropagation();
  }

  function handleClick(e) {
    if (e.target.closest('.comment-card, .comment-card-inline, mark.comment-highlight, .add-comment-btn, .comment-input-container') || (e.target.tagName === 'IMG' && e.target.closest('.prose'))) {
      return;
    }
    if (activeCommentId) {
      setActiveComment(null);
    }
  }

  function handleResizeOrScroll() {
    positionMarginCards();
  }

  // ── Wire up events ──

  document.addEventListener('mouseup', handleMouseUp);
  document.addEventListener('click', handleClick);
  window.addEventListener('resize', handleResizeOrScroll);
  window.addEventListener('scroll', handleResizeOrScroll);

  saveFeedbackBtn.addEventListener('click', saveFeedback);
  clearCommentsBtn.addEventListener('click', clearAllComments);

  // ── Initialize ──

  // Attach click handlers to all images in prose
  var proseImages = prose.querySelectorAll('img');
  for (var ii = 0; ii < proseImages.length; ii++) {
    proseImages[ii].addEventListener('click', onImageClick);
  }

  restoreComments();

  window.addEventListener('load', function() {
    positionMarginCards();
  });
})();
</script>

</body>
</html>
